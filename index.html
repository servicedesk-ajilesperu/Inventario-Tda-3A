<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inventario Tiendas 3A</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:sans-serif;}
body,html{height:100%;width:100%;}
#app{display:flex;height:100vh;width:100vw;}
.sidebar{
    width:260px;
    background:#0f62fe;
    color:white;
    display:flex;
    flex-direction:column;
    gap:12px;
    padding:20px;
}
.brand{
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:700;
    font-size:1.15rem;
}
.menu-section button{
    background:transparent;
    color:white;
    border:none;
    padding:10px;
    width:100%;
    cursor:pointer;
    font-weight:600;
    display:flex;
    align-items:center;
    gap:10px;
    border-radius:8px;
    transition:0.2s;
}
.menu-section button:hover{background:rgba(255,255,255,0.1);}
.main{
    flex:1;
    margin-left:260px;
    display:flex;
    flex-direction:column;
    height:100vh;
}
header.appbar{
    height:64px;
    background:#fff;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 22px;
    box-shadow:0 2px 8px rgba(15,98,254,0.06);
}
.app-title{font-weight:700;color:#0f62fe;}
.counter{
    background:linear-gradient(90deg, rgba(15,98,254,0.08), rgba(255,77,0,0.06));
    padding:8px 12px;
    border-radius:999px;
    font-weight:600;
}
.content{padding:20px;overflow:auto;flex:1;}
.cards{
    display:flex;
    gap:20px;
    flex-wrap:wrap;
    justify-content:flex-start; /* Tarjetas alineadas en fila */
}
.card{
    flex:1;
    min-width:180px;
    background:white;
    padding:15px;
    border-radius:12px;
    box-shadow:0 2px 6px rgba(0,0,0,0.08);
    display:flex;
    flex-direction:column;
    align-items:center;
    text-align:center;
    cursor:pointer;
    transition:0.2s;
}
.card:hover{box-shadow:0 4px 12px rgba(0,0,0,0.15);}
.card i{font-size:28px;color:#0f62fe;}
.card .card-title{font-weight:700;font-size:1.2rem;margin-top:5px;}
.card .card-count{font-size:0.9rem;color:#555;}
</style>
</head>
<body>
<div id="app">
  <aside class="sidebar">
    <div class="brand">
      <i class="fa-solid fa-boxes-stacked"></i>
      <span>Inventario</span>
    </div>
    <div class="menu-section">
      <button onclick="nav('dashboard')"><i class="fa-solid fa-house"></i> <span>Dashboard</span></button>
      <button onclick="nav('list')"><i class="fa-solid fa-table-list"></i> <span>Ver Inventario</span></button>
    </div>
  </aside>

  <div class="main">
    <header class="appbar">
      <div class="app-title">Inventario Tiendas 3A</div>
      <div class="counter" id="header-counter">Total: 0</div>
    </header>
    <main class="content" id="main-content"></main>
  </div>
</div>

<script>
const GAS_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbz5af-9YvEbD_2Lkwss6xPhBXqh9UEaqMqHIQ1OdXrv44SSxsYYa47Z5x4e6LFyPHFN/exec";

let inventario = [], state = {view:'dashboard'};

window.onload = async function(){
  await loadInventario();
  render();
}

async function loadInventario(){
  const res = await fetch(`${GAS_WEB_APP_URL}?sheet=Inventario`);
  inventario = await res.json();
  document.getElementById("header-counter").innerText = `Total: ${inventario.length}`;
}

function nav(v){ state.view = v; render(); }

function render(){
  const mc = document.getElementById("main-content");
  mc.innerHTML = "";

  if(state.view === "dashboard"){
    const cards = document.createElement("div");
    cards.className = "cards";

    const items = [
      {title:"Inventario", icon:"fa-computer", count:inventario.length},
      {title:"Categorias", icon:"fa-tags", count:0},
      {title:"Tiendas", icon:"fa-store", count:0}
    ];

    items.forEach(it=>{
      const c = document.createElement("div");
      c.className = "card";
      c.innerHTML = `<i class="fa-solid ${it.icon}"></i>
                     <div class="card-title">${it.title}</div>
                     <div class="card-count">${it.count} items</div>`;
      cards.appendChild(c);
    });

    mc.appendChild(cards);
  }

  if(state.view === "list"){
    const table = document.createElement("table");
    table.innerHTML = `
      <thead><tr>
        <th>Codigo</th><th>Serie</th><th>Equipo</th>
        <th>Marca</th><th>Modelo</th><th>Categoria</th><th>Tienda</th>
      </tr></thead>
      <tbody>
        ${inventario.map(i=>`
          <tr>
            <td>${i.Codigo}</td>
            <td>${i.Serie}</td>
            <td>${i.Equipo}</td>
            <td>${i.Marca}</td>
            <td>${i.Modelo}</td>
            <td>${i.Categor√≠a}</td>
            <td>${i.Tienda}</td>
          </tr>
        `).join("")}
      </tbody>
    `;
    mc.appendChild(table);
  }
}
</script>
</body>
</html>
